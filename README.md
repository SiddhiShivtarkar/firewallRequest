# firewallRequest - Cloud Automation 
Creating Inbound/Outbound Rule and attaching it to the server

Tools: Linux, Ansible, Jenkins, Terraform, Python. Cloud: GCP

Firewall Rule is like a security guard which will either allow/deny your access to the computer/system. This firewall rules will be created based upon source server, destination server, port and protocol. 
in this usecase, we are creating inbound rule if traffic direction is ingress and creating a outbound rule if traffic direction is egress. we are attaching Inbound rule to destination server and we are attaching outbound rule to the source server. 

Steps: 
1) validate whether all the inputs are coming from SNOW.
2) check whether access is already there or not. (manually: we create network management tests to know whether access is already there or not)
3) creating inbound/outbound rule based on traffic direction (ingress: inbound rule, egress: outbound rule)
4) attaching the firewall rule to the respective server i.e. inbound rule to the destination server and outbound rule to the source server, this will be done using terraform.
  4.1 creating a basic main.tf to execute the terraform import command in order to get terraform state file of existing server.
  4.2 executing terraform init and then terraform import to get state file of existing server.
  4.3 removing old main.tf and executing terraform show command to get entire main.tf of existing server. (some ASCII chars will come using sed command to remove ASCII chars) 
  4.4 Executing python script to comment the parameters which values will be generated on the fly(once you apply terraform changes then this values will be autogenerated, unique values)
  4.5 adding tag inside main.tf using sed command.
  4.6. execute terraform init, terraform plan, terraform appply --auto-approve command to apply changes.
at the end of execution, will have two terraform.tfstate, first is terraform.tfstate after adding tags and terraform.tfstate.backup before adding tags.

Note: running terraform code/gcloud commands/firewll request usecase on localhost i.e. ansible controller since we are doing changes on GCP end. 
